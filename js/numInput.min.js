"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),NumInput=function(){function t(){var e=this;_classCallCheck(this,t),document.addEventListener("touchstart",function(t){if([].concat(_toConsumableArray(t.target.classList)).includes("numInput"))e.inputWork(t.target),e.cursorPositionLeft(t.targetTouches[0].clientX);else{if("keyBox"==t.target.className||"keyBox"===t.target.parentNode.className||"svg"==t.target.tagName||"path"==t.target.tagName)return!1;e._cursor.style.display="none",e.showKey(!1),e._input=null}})}return _createClass(t,[{key:"init",value:function(){var t=this,e=document.createDocumentFragment(),i=document.createElement("style");i.innerHTML=".keyBoard{position: fixed;bottom: 0;left: 0;width: 100%;background: #d0d3da;display: none;transition: all 0.20s linear;}\n      .close{display: flex;justify-content: center;width: 100%;text-align: center;font-size: 10px;color: #000000;line-height: 20px;height: 20px;border-top: 1px solid #f1f1f1;}\n      .close::after{content: '';display: block;width: 10px;height: 10px;border-top: 1px solid #999;border-left: 1px solid #999;transform: rotate(-135deg);}.keyBox{display: flex;flex-wrap: wrap;justify-content: space-evenly;}\n      .keyBox div{width: calc(100% / 3 - 6px);margin-bottom: 6px;border-radius:6px;box-shadow:0px 1px 0px #878b8e;text-align: center;font-size: 24px;line-height: 44px;height: 47px;background: #fff;}.keyBox div:nth-child(3n+3){border-right: none;}\n      .keyCursor{display: none;position: absolute;top:0;left: 0;width: 2px;height: 40px;background: #000000;animation: blink 1s infinite steps(1, start);}.keyBox .gray{background: none;box-shadow: none;}.keyBox div svg{margin-top:7px;}\n      @keyframes blink {0%{background-color: white;}50% {background-color: black;}100% {background-color: white;}}.valbox{position:fixed;left:999px;opacity: 0}.occupancy{display: none;height: 234px;}",document.getElementsByTagName("head")[0].appendChild(i),this._cursor=document.createElement("div"),this._cursor.setAttribute("class","keyCursor"),e.appendChild(this._cursor),this._valbox=document.createElement("div"),this._valbox.setAttribute("class","valbox"),e.appendChild(this._valbox),this._input,this._occupancy=document.createElement("div"),this._occupancy.setAttribute("class","occupancy"),e.appendChild(this._occupancy),this._keyBoard=document.createElement("div"),this._keyBoard.setAttribute("class","keyBoard"),this._keyBoard.innerHTML='\n      <div><span class="close"></span></div>\n      <div class="keyBox">\n        <div>1</div><div>2</div><div>3</div>\n        <div>4</div><div>5</div><div>6</div>\n        <div>7</div><div>8</div><div>9</div>\n        <div class="gray numX"></div><div>0</div><div class="gray del">\n          <svg t="1559553624096" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="31681" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32"><defs><style type="text/css"></style></defs><path d="M875.593995 186.122001l-484.791311 0c-13.570063 0-26.584472 5.390777-36.178991 14.986319L79.908958 475.821009c-9.595542 9.595542-14.986319 22.60995-14.986319 36.178991s5.390777 26.584472 14.986319 36.178991l274.713712 274.711665c9.595542 9.595542 22.608927 14.986319 36.178991 14.986319l484.791311 0c46.033429 0 83.48439-37.449937 83.48439-83.483366L959.077362 269.606391C959.078385 223.572962 921.627425 186.122001 875.593995 186.122001zM907.913075 754.395656c0 17.84953-14.471596 32.318056-32.31908 32.318056l-484.791311 0L116.088972 512.001023 390.802684 237.287311l484.791311 0c17.848507 0 32.31908 14.46955 32.31908 32.31908L907.913075 754.395656z" p-id="31682" fill="#000000"></path><path d="M753.945401 360.214015 632.515794 481.642598 511.085164 360.214015c0 0-16.061814-8.224312-30.356378 6.072299-14.294564 14.294564-6.072299 30.356378-6.072299 30.356378l121.429607 121.428583L486.800062 627.357308c0 0-8.222265 16.061814 6.072299 30.356378 14.296611 14.296611 30.357402 6.072299 30.357402 6.072299l109.286032-109.285009 109.286032 109.285009c0 0 16.061814 8.224312 30.357402-6.072299 14.294564-14.294564 6.070252-30.356378 6.070252-30.356378L668.944472 518.072299 790.375102 396.642692c0 0 8.220219-16.061814-6.074346-30.356378C770.007215 351.989703 753.945401 360.214015 753.945401 360.214015z" p-id="31683" fill="#000000"></path></svg>\n        </div>\n      </div>',e.appendChild(this._keyBoard),document.body.appendChild(e,document.body.firstElementChild),this._keyBoard.addEventListener("touchstart",function(e){if("0123456789x".indexOf(e.target.innerText)>-1){if(t._input.value.length>=t._maxValLength)return;t.setValue(e.target.innerText)}else{if("keyBox"==e.target.className)return;t.deleteValue(),t.cursorPositionLeft()}})}},{key:"inputWork",value:function(t){var e=this._input;this._input=t,e?e!=this._input&&(this.nFocus(e),this.nBlur()):this.nBlur();var i=window.getComputedStyle(this._input);this._maxValLength=this._input.getAttribute("maxLength")?this._input.getAttribute("maxLength"):"6","number"==this._input.getAttribute("type")?document.querySelector(".numX").innerHTML="":document.querySelector(".numX").innerHTML="x",this._valbox.style.cssText+="font-size:"+i.fontSize+";font-weight:"+i.fontWeight+";font-family:"+i.fontFamily+";letter-spacing:"+i.letterSpacing+";",this._valbox.innerHTML="0",this._oneWordWidth=window.getComputedStyle(this._valbox).width.replace("px",""),this._valbox.innerHTML="",this.showKey(!0),this._cursor.style.display="block",this._cursor.style.top=this._input.offsetTop+"px",this._cursor.style.height=this._input.clientHeight+"px",this.domPosition()}},{key:"showKey",value:function(t){var e=this;t?(this._keyBoard.style.display="block",this._keyBoard.style.height="234px"):(this._occupancy&&(this._occupancy.style.display="none"),this._keyBoard.style.height="0",setTimeout(function(){e._keyBoard.style.display="none"},200),this.nFocus())}},{key:"setValue",value:function(t){this._input.value.length>this._valbox.innerHTML.length>0?(this._input.value=this._valbox.innerHTML+t+this._input.value.substr(this._valbox.innerHTML.length,this._input.value.length),this.cursorPositionLeft("",t)):(this._input.value=this._valbox.innerHTML=this._input.value+t,this._valbox.innerHTML=this._input.value,this.cursorPositionLeft())}},{key:"deleteValue",value:function(){this._input.value.length>this._valbox.innerHTML.length>0?(this._input.value=this._valbox.innerHTML.substr(0,this._valbox.innerHTML.length-1)+this._input.value.substr(this._valbox.innerHTML.length,this._input.value.length),this._valbox.innerHTML=this._valbox.innerHTML.substr(0,this._valbox.innerHTML.length-1),this.cursorPositionLeft()):(this._input.value=this._input.value.substr(0,this._input.value.length-1),this._valbox.innerHTML=this._input.value,this.cursorPositionLeft())}},{key:"cursorPositionLeft",value:function(t,e){if(t){var i=t-this._input.offsetLeft,n=parseFloat(i/this._oneWordWidth);this._valbox.innerHTML=this._input.value.substr(0,n)}else e&&(this._valbox.innerHTML=this._valbox.innerHTML+e);this._cursor.style.left=parseInt(window.getComputedStyle(this._valbox).width)+this._input.offsetLeft+"px"}},{key:"domPosition",value:function(){var t=[window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,this._input.offsetTop,window.screen.height,this._input.clientHeight],e=t[0],i=t[1],n=t[2];i+t[3]>e+n-234&&(this._occupancy.style.display="block",window.scrollTo({top:i-(n-234)/2,behavior:"smooth"}))}},{key:"nFocus",value:function(t){"function"==typeof this.inputFocus&&this.inputFocus(t||this._input)}},{key:"nBlur",value:function(){"function"==typeof this.inputBlur&&this.inputBlur(this._input)}},{key:"toBlur",value:function(t){this.inputWork(t),this.cursorPositionLeft()}},{key:"toFocus",value:function(t){t&&this.inputWork(t),this._cursor.style.display="none",this.showKey(!1)}}]),t}();